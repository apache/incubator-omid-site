<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.7 at 2016-08-15 
 | Rendered using Apache Maven Fluido Skin 1.5
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20160815" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Apache Omid &#x2013; Basic Concepts</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.5.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.5.min.js"></script>

                      </head>
        <body class="topBarEnabled">
          
                        
                    
                

    <div id="topbar" class="navbar navbar-fixed-top ">
      <div class="navbar-inner">
                                  <div class="container" style="width: 100%;"><div class="nav-collapse">
            
                
                                <ul class="nav">
                          <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Home <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="index.html"  title="Overview">Overview</a>
</li>
                  
                      <li>      <a href="license.html"  title="License">License</a>
</li>
                          </ul>
      </li>
                <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Download <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="https://github.com/yahoo/omid"  title="Omid Sources">Omid Sources</a>
</li>
                  
                      <li>      <a href="https://bintray.com/yahoo/maven/omid/_latestVersion"  title="Bintray Repository">Bintray Repository</a>
</li>
                          </ul>
      </li>
                <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">User Guide & API <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="quickstart.html"  title="Quickstart">Quickstart</a>
</li>
                  
                      <li>      <a href="basic-examples.html"  title="API and Code Examples">API and Code Examples</a>
</li>
                          </ul>
      </li>
                <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Technical Docs <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="basic-concepts.html"  title="Basic Concepts">Basic Concepts</a>
</li>
                  
                      <li>      <a href="omid-components.html"  title="Omid Components">Omid Components</a>
</li>
                  
                      <li>      <a href="basic-algorithm.html"  title="Basic Algorithm">Basic Algorithm</a>
</li>
                  
                      <li>      <a href="client-failure-management.html"  title="Management of Client Failures">Management of Client Failures</a>
</li>
                  
                      <li>      <a href="http://yahoohadoop.tumblr.com/tagged/HBase"  title="Blog Entries">Blog Entries</a>
</li>
                          </ul>
      </li>
                <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Contribute <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="https://git-wip-us.apache.org/repos/asf/incubator-omid.git"  title="Source Code">Source Code</a>
</li>
                  
                      <li>      <a href="https://issues.apache.org/jira/browse/Omid"  title="JIRA">JIRA</a>
</li>
                  
                      <li>      <a href="mailing-lists.html"  title="Mailing Lists">Mailing Lists</a>
</li>
                  
                      <li>      <a href="coding-guide-and-style.html"  title="Coding Guide and Style">Coding Guide and Style</a>
</li>
                          </ul>
      </li>
                <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Project Reports <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li class="dropdown-submenu">
                                      <a href="project-info.html"  title="Project Information">Project Information</a>
              <ul class="dropdown-menu">
                                  <li>      <a href="dependency-convergence.html"  title="Dependency Convergence">Dependency Convergence</a>
</li>
                                  <li>      <a href="dependency-info.html"  title="Dependency Information">Dependency Information</a>
</li>
                                  <li>      <a href="dependency-management.html"  title="Dependency Management">Dependency Management</a>
</li>
                                  <li>      <a href="distribution-management.html"  title="Distribution Management">Distribution Management</a>
</li>
                                  <li>      <a href="index.html"  title="About">About</a>
</li>
                                  <li>      <a href="license.html"  title="Licenses">Licenses</a>
</li>
                                  <li>      <a href="mail-lists.html"  title="Mailing Lists">Mailing Lists</a>
</li>
                                  <li>      <a href="modules.html"  title="Project Modules">Project Modules</a>
</li>
                                  <li>      <a href="plugin-management.html"  title="Plugin Management">Plugin Management</a>
</li>
                                  <li>      <a href="plugins.html"  title="Plugins">Plugins</a>
</li>
                                  <li>      <a href="team-list.html"  title="Team">Team</a>
</li>
                                  <li>      <a href="source-repository.html"  title="Source Code Management">Source Code Management</a>
</li>
                                  <li>      <a href="project-summary.html"  title="Summary">Summary</a>
</li>
                              </ul>
            </li>
                  
                      <li class="dropdown-submenu">
                                      <a href="project-reports.html"  title="Project Reports">Project Reports</a>
              <ul class="dropdown-menu">
                                  <li>      <a href="xref/index.html"  title="Source Xref">Source Xref</a>
</li>
                                  <li>      <a href="xref-test/index.html"  title="Test Source Xref">Test Source Xref</a>
</li>
                                  <li>      <a href="checkstyle-aggregate.html"  title="Checkstyle">Checkstyle</a>
</li>
                                  <li>      <a href="cpd.html"  title="CPD">CPD</a>
</li>
                                  <li>      <a href="pmd.html"  title="PMD">PMD</a>
</li>
                              </ul>
            </li>
                          </ul>
      </li>
                  </ul>
          
                      <form id="search-form" action="https://www.google.com/search" method="get"  class="navbar-search pull-right" >
    
  <input value="omid.incubator.apache.org" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" />
</form>
<script type="text/javascript" src="https://cse.google.com/brand?form=search-form"></script>
          
                                                    
        
        
        <ul class="nav pull-right"><li>
    
    <a href="https://twitter.com/apacheomid" class="twitter-follow-button" data-show-count="true" data-align="right" data-size="large" data-show-screen-name="true" data-lang="en">Follow apacheomid</a>
    <script type="text/javascript">!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

        </li></ul>
                              
                   
                      </div>
          
        </div>
      </div>
    </div>
    
        <div class="container">
          <div id="banner">
        <div class="pull-left">
                                                  <a href="./" id="bannerLeft">
                                                                                                <img src="images/omid-logo.png"  alt="Omid" width="200"/>
                </a>
                      </div>
        <div class="pull-right">                  <a href="http://incubator.apache.org/" id="bannerRight">
                                                                                        <img src="http://incubator.apache.org/images/egg-logo2.png"  alt="Apache Incubator" width="200"/>
                </a>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
              
                  <li id="projectVersion">Version: 0.8.2.0
                    </li>
              
              
                  <li id="publishDate" class="pull-right">Last Published: 2016-08-15</li>
            
                            </ul>
      </div>

      
                
        <div id="bodyColumn" >
                                  
            <h1>Basic Concepts</h1>
<p>Omid started as a research project in 2011 at Yahoo Labs, with the aim of adding transactions to HBase. While Omid was designed with HBase in mind, we have been careful to not bind ourselves to a particular big datastore. As a consequence, Omid can be potentially adapted to be used with any other multiversioned key-value datastore with some additional extensions.</p>
<p>In the next sections, we introduce two basic concepts that have driven Omid&#x2019;s design.</p>
<div class="section">
<h2><a name="Locking_vs_Lock-Free"></a>Locking vs Lock-Free</h2>
<p>When solving the <b>conflict detection</b> problem in transactional systems, there are two main approaches that transaction managers may implement: <i>locking</i> and <i>lock-free</i>.</p>
<p>With a locking mechanism, the client managing the transaction attempts to acquire a lock on each cell in the writeset (the set of changes in data performed by the transaction) before committing. If it succeeds in acquiring the lock, and no other transaction has written to the cells since the start of the client&#x2019;s transaction, it can commit, as it knows that no other transaction can write to the cell after the lock has been acquired. Once the commit has completed, the client can release the locks on the cells. If the client fails to acquire the lock on any cell or some other transaction has written to it since the start of the transaction, then the transaction is aborted. </p>
<p>For example, <a class="externalLink" href="http://research.google.com/pubs/pub36726.html">Google Percolator</a> uses a locking mechanism in its transactional system, and so do other subsequent academic and open source transaction managers for NoSQL datastores.</p>
<p>Locking systems can be problematic in a distributed setting and in the presence of process failures. If a client fails while holding a lock another process must clean up the locks held by that client. However, it is impossible to detect reliably if a client has failed or is just being slow. Normally this is dealt with using timeouts, after which the client is invalidated and its locks released. However, the timeout must be high enough to ensure that valid clients are not invalidated.</p>
<p>In lock-based systems, it is also possible for two transactions to repeatedly conflict with each other over multiple retries as there is no defined order in which locks must be acquired.</p>
<p>In a lock-free implementation, this type of livelock is not possible. Transactions can always make progress. A lock-free implementation has a centralized conflict-detection mechanism. To commit a transaction, each transaction writeset is sent to this mechanism to check for conflicts with the writesets of other concurrent transactions. If none of those transaction has written to any of the cells of the writeset since the start of the transaction, the transaction can commit. Otherwise the transaction is aborted. Omid uses a lock-free mechanism for conflict detection.</p></div>
<div class="section">
<h2><a name="Snapshot_Isolation"></a>Snapshot Isolation</h2>
<p>Isolation in ACID refers to the ability for multiple clients to act on a database without interfering with each other. There are various isolation levels, each making a different tradeoff between isolation and concurrent access to the database. Omid is only concerned with Snapshot Isolation.</p>
<p><b><a class="externalLink" href="http://research.microsoft.com/pubs/69541/tr-95-51.pdf">Snapshot Isolation (SI)</a></b> provides the users of a database with a consistent view of the database and the ability to detect write-write conficts between transactions. When a client starts a transaction, it is given a <i>&#x201c;snapshot view&#x201d;</i> of the database. A value read from a cell within this snapshot will always be the same, unless the transaction itself updates the cell.</p>
<p>To successfully commit a transaction within snapshot isolation, the system must ensure that no other transaction has written to any of the transaction&#x2019;s written cells (that is, its writeset) since the start of the transaction.</p>
<p>That is, transactions with SI guarantees should read from their own data snapshot, being a data snapshot:</p>

<ul>
  
<li>Immutable</li>
  
<li>Identified by creation time</li>
  
<li>Containing values committed before creation time</li>
</ul>
<p>In Omid, transactions conflict iff:</p>

<ul>
  
<li>Overlap in time, and&#x2026;</li>
  
<li>&#x2026; write to the same cell of a particular row</li>
</ul>
<p>The following figure describes SI with an example: <img src="images/snapshot-isolation.png" alt="Snapshot Isolation" /></p>
<p>As depicted in the figure, transaction T2 overlaps in time with T1 and T3, but spatially:</p>

<ul>
  
<li>T1 &#x2229; T2 = &#x2205;</li>
  
<li>T2 &#x2229; T3 = { R4 }</li>
</ul>
<p>So, transactions T1 and T2, despite overlaping in time, they do not overlap in the elements they modify, so they do not conflict. However, transactions T2 and T3 have a conflict because they overlap both in space (both modify R4) and time. Finally, Transaction T4 does not has conflicts with other transactions.</p>
<p>Compared to other isolation levels, SI offers good-enough consistency guarantees -although some anomalies may appear on data, e.g. write-skew- and performance, mainly due to the fact transactions are not aborted due to read-write conflicts. We took this into consideration and we decided to implement SI as the default isolation level for Omid.</p></div>
                  </div>
          </div>

    <hr/>

    <footer>
            <div class="container">
                      <div class="row">
                                      <p >Copyright &copy;                    2011&#x2013;2016
                        <a href="http://www.apache.org">Apache Software Foundation</a>.
            All rights reserved.    
      </p>
                </div>

                <p id="poweredBy" class="pull-right">
                                                                                                                <a href="http://maven.apache.org/" title="Maven" class="builtBy">
        <img class="builtBy"  alt="Maven" src="http://maven.apache.org/images/logos/maven-feather.png"    />
      </a>
                  </p>
        
                </div>
    </footer>
        </body>
</html>
